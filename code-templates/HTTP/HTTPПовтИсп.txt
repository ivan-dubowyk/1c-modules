
Функция КлючПодписиТокенаДоступаAPI() Экспорт
	
	Возврат Константы.КлючПодписиТокенаДоступаAPI.Получить();
	
КонецФункции

Функция ЛогироватьЗапросыAPI() Экспорт
	
	Возврат Константы.ЛогироватьЗапросыAPI.Получить();
	
КонецФункции

Функция ПартнерПользователя() Экспорт
	
	УстановитьПривилегированныйРежим(Истина);
	
	Партнер = Неопределено;
	
	Если Пользователи.ЭтоСеансВнешнегоПользователя() Тогда
		ТекПользователь = Пользователи.АвторизованныйПользователь();
		Партнер = ОбщегоНазначения.ЗначениеРеквизитаОбъекта(ТекПользователь, "ОбъектАвторизации");
	КонецЕсли;
	
	Возврат Партнер;
	
КонецФункции

Функция ВидЦеныПартнера(Партнер) Экспорт
	
	ВидЦенD = ДР_ПредопределенныеЗначенияСерверПовтИсп.Получить(Перечисления.ДР_ТипыПредопределенныхЗначений.ВидЦены_ЦенаD);
	
	УсловияПродажПоУмолчанию = ПродажиСервер.ПолучитьУсловияПродажПоУмолчанию(Партнер, 
												Новый Структура("УчитыватьГруппыСкладов", Истина)); 
												
	Если УсловияПродажПоУмолчанию <> Неопределено
		И ЗначениеЗаполнено(УсловияПродажПоУмолчанию.Соглашение) Тогда
		
		Если ЗначениеЗаполнено(УсловияПродажПоУмолчанию.Соглашение.ИндивидуальныйВидЦены) Тогда
			ВидЦены = УсловияПродажПоУмолчанию.Соглашение.ИндивидуальныйВидЦены;
		ИначеЕсли ЗначениеЗаполнено(УсловияПродажПоУмолчанию.Соглашение.ВидЦен) Тогда
			ВидЦены = УсловияПродажПоУмолчанию.Соглашение.ВидЦен;
		Иначе
			ВидЦены = ВидЦенD;
		КонецЕсли;
	Иначе
		ВидЦены = ВидЦенD;
	КонецЕсли;

Возврат ВидЦены;

КонецФункции	
